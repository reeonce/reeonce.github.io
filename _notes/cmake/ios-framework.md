---
layout: default
comments: true
---


```cmake
# set(CMAKE_MACOSX_RPATH 1)
# SET(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
# SET(CMAKE_INSTALL_RPATH_USE_LINK_PATH FALSE) 

add_library(${FRAMEWORK_NAME} SHARED
    src/XXXX.h
    src/XXXX_Foo.h src/XXXX_Foo.mm
)

set(BMG_PUBLIC_HEADERS src/XXXX.h src/XXXX_Foo.h)

set_target_properties(${FRAMEWORK_NAME} PROPERTIES
  FRAMEWORK TRUE
  FRAMEWORK_VERSION C
  MACOSX_FRAMEWORK_IDENTIFIER com.insta360.arvbmg
  MACOSX_FRAMEWORK_INFO_PLIST ${CMAKE_CURRENT_SOURCE_DIR}/Info.plist
  PUBLIC_HEADER "${BMG_PUBLIC_HEADERS}"
  XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET "9.0"
  XCODE_ATTRIBUTE_CODE_SIGN_IDENTITY "iPhone Developer"
  XCODE_ATTRIBUTE_ONLY_ACTIVE_ARCH[variant=Debug] "YES"
  XCODE_ATTRIBUTE_DEFINES_MODULE "YES"
  XCODE_ATTRIBUTE_DYLIB_INSTALL_NAME_BASE "@rpath"
  INSTALL_RPATH "@executable_path/Frameworks;@loader_path/Frameworks"
)
```